/*! hashmapper - v0.2.3
 *  Release on: 2015-01-26
 *  Copyright (c) 2015 StÃ©phane Bachelier
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():b()}(this,function(){"use strict";var a=function(){this._map=Object.create(null),this._index=[]};return a.prototype={add:function(a,b){return a?(this._map[a]=b,this._index.push(a),this):!1},get:function(a){return a?this._map[a]:!1},remove:function(a){var b=this.get(a);if(b){delete this._map[a];var c=this._index.indexOf(a);-1!==c&&this._index.splice(c,1)}return b},last:function(){return this.get(this._index[this._index.length-1])},range:function(a,b,c){var d,e=0;if(d=b?this._index.indexOf(b):this._index.length-1,-1===d&&(d=this._index.length-1),e=a?this._index.indexOf(a):0,-1===e&&(e=0),e>d){var f=e;e=d,d=f}e=0>=e?0:e,d=d>=this._index.length-1?void 0:d;var g=c&&!0===c.excludeStart,h=c&&!0===c.excludeEnd;e=g?e+1:e,d=h?void 0===d?this._index.length:d-1:d;for(var i,j=this._index.slice(e,d),k=Object.keys(this._map),l=0,m=k.length,n=[];m>l;l+=1)i=k[l],-1!==j.indexOf(i)&&n.push(this._map[i]);return n},invertedRange:function(a,b,c){for(var d=this.range(a,b,c),e=[],f=d.length,g=f-1;g>=0;g-=1)e.push(d[g]);return e},at:function(a){var b=this._index.length;return b?0>a?b>=-a?this.get(this._index[b+a]):null:a>=0&&b>a?this.get(this._index[a]):null:null},isEmpty:function(){return 0===this._index.length},iter:function(a,b){for(var c=0,d=this._index.length;d>c;c+=1)a.call(b,c,this._index[c])},iterDown:function(a,b){for(var c=this._index.length,d=c-1;d>=0;d-=1)a.call(b,d,this._index[d])},loop:function(a){var b=this;this.iter(function(c,d){a(b.get(d))})},loopDown:function(a){var b=this;this.iterDown(function(c,d){a(b.get(d))})},loopDownUntil:function(a,b){var c,d,e=this;return this.iterDown(function(f,g){return c=e.get(g),d=a(c),"function"==typeof b?b(d):b===d}),d}},a});